
@page
@model Pet_Reunion_Hub.Pages.PETMEMORIAL.CONTAINERS.ContainerPostsModel
@{
    ViewData["Title"] = "Container Posts";
}

<h1>Posts in @Model.ContainerId</h1>

@* <div class="row">
    @foreach (var post in Model.Posts)
    {
        <div class="col-md-4">

            <div class="card">

                <div class="card-body">
                    <h5 class="card-title">@post.Content</h5>
                </div>

            </div>

        </div>
    }
</div> *@
<div class="row" style="border: 1px solid #ccc; padding: 30px; margin-bottom: 20px;  border-radius: 5px; background-color: #fff;">
    @foreach (var post in Model.Posts)
    {
        <div class="col-md-4" >
            
                    <h5 class="card-title">@post.Content</h5>
                    <br/>
                    @if (post.Media != null && post.Media.Any())
                    {
                        <p><strong>Your Files:</strong></p>
                        <div class="media-container">
                            @foreach (var mediaItem in post.Media)
                            {
                                var lastSlashIndex = mediaItem.MediaUrl.LastIndexOf('/');
                                var fileName = mediaItem.MediaUrl.Substring(lastSlashIndex + 1);
                                var lastUnderscoreIndex = fileName.LastIndexOf('_');

                                if (lastUnderscoreIndex != -1)
                                {
                                    var fileNameWithoutUniqueIdentifier = fileName.Substring(0, lastUnderscoreIndex);
                                    <span style="display: block; font-size: small;">@fileNameWithoutUniqueIdentifier</span>
                                }
                                else
                                {
                                    <span style="display: block; font-size: small;">@fileName</span>
                                }

                                if (mediaItem.MediaType == "Image")
                                {
                                    <img src="@mediaItem.MediaUrl" alt="Media Image" style="max-width: 200px; margin-right: 10px;">
                                }
                                else if (mediaItem.MediaType == "Video")
                                {
                                    <video src="@mediaItem.MediaUrl" controls style="max-width: 200px; margin-right: 10px;"></video>
                                }
                                else if (mediaItem.MediaType == "Audio")
                                {
                                    <audio src="@mediaItem.MediaUrl" controls style="max-width: 200px; margin-right: 10px;"></audio>
                                }
                            }
                </div>
            }
            else
            {
               <p>No posts</p>
            }
        </div>
        <div class="col-md-12">
           
            <p>
                <a asp-page="/POSTS/Edit" asp-route-id="@post.Id" id="delete">Edit</a>
            </p>
        </div>
  
       
    }
</div>